# Тесты для Backend

## Установка зависимостей

```bash
cd backend
npm install
```

## Запуск тестов

```bash
npm test
```

## Запуск тестов в режиме наблюдения

```bash
npm run test:watch
```

## Описание тестов

### cars.sell.test.js

Тесты для функционала продажи автомобилей (`POST /api/cars/sell`):

- ✅ Создание объявления с валидными данными
- ✅ Проверка обязательных полей
- ✅ Валидация года выпуска
- ✅ Валидация цены
- ✅ Валидация пробега
- ✅ Создание автомобиля с минимальными данными
- ✅ Сохранение sellerId текущего пользователя
- ✅ Установка статуса pending для нового объявления

## Настройка тестовой базы данных

Перед запуском тестов убедитесь, что:
1. PostgreSQL запущен
2. Создана тестовая база данных (или используйте существующую)
3. Настроен `.env` файл с параметрами подключения к БД

## Примечания

- Тесты используют моки для middleware авторизации
- Тестовые данные автоматически очищаются после каждого теста
- Для изоляции тестов рекомендуется использовать отдельную тестовую БД
