# –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

## ‚úÖ 1. Seller Rating System

### API Endpoints:
- `POST /api/ratings/:sellerId` - –°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ –ø—Ä–æ–¥–∞–≤—Ü–∞
- `GET /api/ratings/:sellerId` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ–π—Ç–∏–Ω–≥–∞ (average, total)
- `GET /api/ratings/seller/:sellerId` - –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
- `GET /api/ratings/seller/:sellerId/my` - –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### Response Format:
```json
{
  "average": 4.6,
  "total": 120
}
```

### Database:
- –¢–∞–±–ª–∏—Ü–∞: `seller_ratings`
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å: `(seller_id, user_id)`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å –ø—Ä–æ–¥–∞–≤—Ü–∞ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

---

## ‚úÖ 2. Car Views Counter

### Implementation:
- **Batch Update**: –°—á–µ—Ç—á–∏–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–∞–∫–µ—Ç–Ω–æ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **In-Memory Cache**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Map –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –¥–æ batch update
- **API**: `GET /api/cars/:id` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

### Database:
- –¢–∞–±–ª–∏—Ü–∞: `cars`
- –ö–æ–ª–æ–Ω–∫–∞: `views INT DEFAULT 0`

### Response:
```json
{
  "id": 6,
  "brand": "Toyota",
  "views": 1523,
  ...
}
```

---

## ‚úÖ 3. Share Button (Frontend)

### Features:
- WhatsApp share link
- Telegram share link
- Copy link to clipboard

### Format:
- `https://yourdomain.com/car/:id`

### Location:
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `frontend/src/components/ShareButton.js`
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–µ—Ç–∞–ª–µ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—è

---

## ‚úÖ 4. Notification System (In-App üîî)

### Database:
- –¢–∞–±–ª–∏—Ü–∞: `notifications`
- –¢–∏–ø—ã: `MESSAGE`, `PRICE_DROP`, `TEST_DRIVE_APPROVED`

### API Endpoints:
- `GET /api/notifications` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/notifications/unread-count` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- `PATCH /api/notifications/:id/read` - –û—Ç–º–µ—Ç–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
- `PATCH /api/notifications/read-all` - –û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
- `DELETE /api/notifications/:id` - –£–¥–∞–ª–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### Frontend:
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `frontend/src/components/NotificationBell.js`
- –ò–∫–æ–Ω–∫–∞ –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫–∞ —Å —Å—á–µ—Ç—á–∏–∫–æ–º –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- Dropdown —Å–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Socket.io

---

## ‚úÖ 5. Price Drop Alert

### Database:
- –¢–∞–±–ª–∏—Ü–∞: `price_alerts`
- –ü–æ–ª—è: `user_id`, `car_id`, `target_price`, `is_active`, `notified`

### Logic:
- Cron job –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–ª–µ—Ä—Ç—ã –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Ü–µ–Ω—ã –¥–æ —Ü–µ–ª–µ–≤–æ–π –∏–ª–∏ –Ω–∏–∂–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ `PRICE_DROP`
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Socket.io –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### API Endpoints:
- `POST /api/price-alerts` - –°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω–æ–≤–æ–π –∞–ª–µ—Ä—Ç
- `GET /api/price-alerts` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–ª–µ—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /api/price-alerts/:id` - –£–¥–∞–ª–∏—Ç—å –∞–ª–µ—Ä—Ç

### Frontend:
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `frontend/src/components/PriceDropAlert.js`
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª–µ–≤—É—é —Ü–µ–Ω—É

---

## ‚úÖ 6. Realtime Chat System (Socket.io)

### Database:
- –¢–∞–±–ª–∏—Ü–∞: `chats` (conversations)
  - `id`, `car_id`, `buyer_id`, `seller_id`, `last_message_at`
- –¢–∞–±–ª–∏—Ü–∞: `messages`
  - `id`, `chat_id`, `sender_id`, `text`, `read`, `created_at`

### Socket Events:
**Client ‚Üí Server:**
- `join-chat` - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —á–∞—Ç—É
- `leave-chat` - –ü–æ–∫–∏–Ω—É—Ç—å —á–∞—Ç
- `typing` - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏
- `send-message` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ REST API)

**Server ‚Üí Client:**
- `new-message` - –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `typing` - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏ –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `notification` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏

### REST API:
- `POST /api/chat` - –°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç—å —á–∞—Ç
- `GET /api/chat` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —á–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/chat/:id` - –ü–æ–ª—É—á–∏—Ç—å —á–∞—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- `POST /api/chat/:id/messages` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

### Frontend:
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `frontend/src/components/Chat.js` - –û—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `frontend/src/components/ChatList.js` - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
- Features:
  - Real-time —Å–æ–æ–±—â–µ–Ω–∏—è
  - –°—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏ ("typing...")
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Backend:
- **Node.js + Express**
- **PostgreSQL + Sequelize ORM**
- **Socket.io** –¥–ª—è real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- **node-cron** –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- **JWT** –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### Frontend:
- **React.js**
- **Socket.io-client** –¥–ª—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **Axios** –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **Context API** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- **Batch Update** –¥–ª—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥)
- **In-Memory Cache** –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤
- **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** —á–µ—Ä–µ–∑ Socket.io –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

---

## –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º! ‚úÖ
